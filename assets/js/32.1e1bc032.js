(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{800:function(t,n,o){"use strict";o.r(n);var r=o(5),y=Object(r.a)({},(function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("p",[t._v("Python èªè¨€å·²ç¶“æ˜¯ä¸–ç•Œä¸Šæœ€å¤šäººä½¿ç”¨çš„èªè¨€ä¹‹ä¸€ï¼ŒPython å®˜æ–¹ä½¿ç”¨çš„ Python Virtual Machine æ˜¯ Cpython, ä½† CPython è¢«äººè©¬ç—…çš„é™¤äº† GIL æ©Ÿåˆ¶ï¼Œé‚„æœ‰åœ¨å¯¦ä½œæ–¹é¢å¾ˆé›£å¼•å…¥ Just in time compilation.ã€‚å› æ­¤æœ‰å¦å¤–ä¸€ç¨®å…·æœ‰ JIT æ€§è³ªçš„ Python Virtual Machine - Pypy. åœ¨æ­¤ç« ï¼Œæœƒä»‹ç´¹ Pypy è·Ÿ Rpython Translation Toolchain çš„é‚£æª”äº‹ã€‚"),o("br")]),t._v(" "),o("h1",{attrs:{id:"introduction-pypy-and-rpython-translation-toolchain"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#introduction-pypy-and-rpython-translation-toolchain"}},[t._v("#")]),t._v(" Introduction. Pypy and Rpython Translation Toolchain")]),t._v(" "),o("p",[o("img",{attrs:{src:"https://memeprod.sgp1.digitaloceanspaces.com/user-wtf/1661156642130.jpg",alt:""}})]),t._v(" "),o("h2",{attrs:{id:"ä¸€ã€pypy-ç°¡ä»‹"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€pypy-ç°¡ä»‹"}},[t._v("#")]),t._v(" ä¸€ã€Pypy ç°¡ä»‹")]),t._v(" "),o("p",[t._v("Pypy æ˜¯ Python èªè¨€çš„ä¸€å€‹å¯¦ç¾ï¼Œæ—¨åœ¨æä¾›æ›´å¥½çš„åŸ·è¡Œæ™‚æ€§èƒ½å’Œæ›´é«˜çš„æ•ˆèƒ½ã€‚å®ƒæ˜¯ç”¨ Python (Rpython) èªè¨€æœ¬èº«é–‹ç™¼çš„ï¼Œä¸¦æ¡ç”¨äº†å³æ™‚ï¼ˆJITï¼‰ç·¨è­¯æŠ€è¡“ã€‚")]),t._v(" "),o("p",[t._v("å‚³çµ±çš„ CPython æ˜¯ Python å®˜æ–¹çš„æ¨™æº–å¯¦ç¾ï¼Œå®ƒä½¿ç”¨è§£é‡‹å™¨å°‡ Python ä»£ç¢¼è½‰æ›ç‚º Bytecodeï¼Œç„¶å¾Œé‹è¡Œé€™äº› Bytecodeã€‚å„˜ç®¡ CPython å¯ä»¥ç¢ºä¿ Python ä»£ç¢¼çš„ç©©å¥é‹è¡Œï¼Œä½†å®ƒåœ¨æŸäº›æƒ…æ³ä¸‹å¯èƒ½å› ç‚º "),o("mark",[t._v("å…¨åŸŸè§£é‡‹å™¨é–ï¼ˆGlobal Interpreter Lockï¼ŒGILï¼‰çš„å­˜åœ¨è€Œå°è‡´å¤šç·šç¨‹è™•ç†æ•ˆèƒ½ä¸ä½³")]),t._v("ã€‚æ­¤å¤–ï¼ŒCPython çš„åŸ·è¡Œæ™‚æ€§èƒ½ä¹Ÿæœ‰é™ã€‚")]),t._v(" "),o("p",[t._v("ç‚ºäº†å…‹æœé€™äº›æ•ˆèƒ½é™åˆ¶ï¼ŒPyPy å°ˆæ³¨æ–¼æ”¹é€² Python ç¨‹å¼ç¢¼çš„åŸ·è¡Œé€Ÿåº¦ã€‚å®ƒä½¿ç”¨ JIT ç·¨è­¯æŠ€è¡“ï¼Œè©²æŠ€è¡“åœ¨åŸ·è¡Œæ™‚å°‡ Python Bytecode è½‰æ›ç‚ºæœ¬æ©Ÿæ©Ÿå™¨ç¢¼ï¼Œå¾è€Œä½¿å¾— Python ä»£ç¢¼èƒ½å¤ æ›´æœ‰æ•ˆç‡åœ°é‹è¡Œã€‚è€Œä¸”ï¼ŒPyPy ä¹Ÿå…·æœ‰æ›´å¥½çš„å¤šç·šç¨‹è™•ç†æ”¯æ´ï¼Œå› ç‚ºå®ƒèƒ½å¤ æ›´å¥½åœ°åˆ©ç”¨ç¾ä»£å¤šæ ¸è™•ç†å™¨ã€‚")]),t._v(" "),o("p",[t._v("ç¶œåˆä»¥ä¸Šï¼ŒPypy å…·æœ‰ä»¥ä¸‹ç‰¹é»")]),t._v(" "),o("ol",[o("li",[o("p",[t._v("JIT ç·¨è­¯ï¼šPyPy çš„æ ¸å¿ƒå„ªå‹¢åœ¨æ–¼å…¶å³æ™‚ç·¨è­¯æŠ€è¡“ã€‚åœ¨é‹è¡Œæ™‚ï¼ŒPyPy è§£æä¸¦æœ€ä½³åŒ– Python Bytecodeã€‚ç„¶å¾Œå°‡å…¶è½‰æ›ç‚ºæœ¬æ©Ÿæ©Ÿå™¨ç¢¼ï¼Œå¾è€Œæé«˜é‹è¡Œæ™‚æ•ˆèƒ½ã€‚PyPy çš„ JIT ç·¨è­¯æŠ€è¡“ä½¿å¾—å®ƒèƒ½å¤ æ ¹æ“šç¨‹å¼ç¢¼çš„å¯¦éš›é‹è¡Œæƒ…æ³é€²è¡Œå‹•æ…‹èª¿æ•´å’Œå„ªåŒ–ï¼Œå¾è€Œé€²ä¸€æ­¥æé«˜é‹è¡Œæ™‚æ€§èƒ½ã€‚")])]),t._v(" "),o("li",[o("p",[t._v("å…¼å®¹æ€§ï¼šPyPy æ˜¯ä¸€å€‹ç¬¦åˆ Python è¦ç¯„çš„å¯¦ç¾ï¼Œå®ƒèƒ½å¤ é‹è¡Œå¤§éƒ¨åˆ†æ¨™æº–çš„ Python ç¨‹å¼ç¢¼ã€‚ç„¶è€Œï¼Œç”±æ–¼ä¸€äº›å¯¦ç¾ç´°ç¯€å’Œç‰¹æ®Šæ€§ï¼Œä¸€äº›ä¾è³´æ–¼ CPython ç‰¹å®šåŠŸèƒ½æˆ–æ“´å±•çš„ä»£ç¢¼å¯èƒ½éœ€è¦é€²è¡Œèª¿æ•´ä»¥åœ¨ PyPy ä¸Šé‹è¡Œã€‚")])]),t._v(" "),o("li",[o("p",[t._v("æ”¯æ´å¤šç‰ˆæœ¬ï¼šPyPy æ”¯æ´ Python 2 å’Œ Python 3ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ PyPy ä¸Šé‹è¡Œä¸åŒç‰ˆæœ¬çš„ Python ç¨‹å¼ç¢¼ã€‚")])]),t._v(" "),o("li",[o("p",[t._v("é«˜æ•ˆèƒ½ï¼šåœ¨æŸäº›æƒ…æ³ä¸‹ï¼ŒPyPy èƒ½å¤ æ¯” CPython å¿«æ•¸å€ï¼Œç‰¹åˆ¥æ˜¯å°æ–¼è¨ˆç®—å¯†é›†å‹æˆ–é«˜åº¦è¿´åœˆåµŒå¥—çš„ç¨‹å¼ç¢¼ã€‚")])])]),t._v(" "),o("p",[t._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé›–ç„¶ PyPy æä¾›äº†å„ªè¶Šçš„æ€§èƒ½ï¼Œä½†å®ƒä¸¦ä¸é©ç”¨æ–¼æ‰€æœ‰æƒ…æ³ã€‚åœ¨ä¸€äº›ç‰¹å®šçš„å ´æ™¯ä¸­ï¼ŒCPython å¯èƒ½æ›´é©åˆï¼Œå°¤å…¶æ˜¯ç•¶ç¨‹å¼ç¢¼ä¾è³´æ–¼ç‰¹å®šçš„ CPython æ“´å±•æˆ–å‡½å¼åº«æ™‚ã€‚æŸäº› Python æ“´å±•å¯èƒ½ä¸èˆ‡ PyPy å®Œå…¨ç›¸å®¹ï¼Œä¸¦éœ€è¦ç‰¹å®šçš„ CPython ç’°å¢ƒã€‚å„˜ç®¡å¦‚æ­¤ï¼ŒPyPy çš„ç™¼å±•æŒçºŒé€²è¡Œä¸­ï¼Œæœªä¾†å®ƒå¯èƒ½æœƒæˆç‚ºæ›´å¤š Python ç¨‹å¼ç¢¼çš„é¦–é¸é‹è¡Œç’°å¢ƒä¹‹ä¸€ã€‚")]),t._v(" "),o("h1",{attrs:{id:"äºŒã€ä»€éº¼æ˜¯-rpython"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€ä»€éº¼æ˜¯-rpython"}},[t._v("#")]),t._v(" äºŒã€ä»€éº¼æ˜¯ Rpython")]),t._v(" "),o("p",[t._v("RPython æ˜¯ä¸€ç¨®åç‚º RPython (Restricted Python) çš„ç¨‹å¼èªè¨€å’Œå·¥å…·é›†(ToolChain)ã€‚RPython æ˜¯ Python èªè¨€çš„ä¸€å€‹å­é›†ï¼Œæ—¨åœ¨ç‚ºå‹•æ…‹èªè¨€ï¼ˆç‰¹åˆ¥æ˜¯ Pythonï¼‰æä¾›éœæ…‹é¡å‹æª¢æŸ¥å’Œç·¨è­¯å™¨æ”¯æ´ã€‚")]),t._v(" "),o("p",[o("mark",[t._v("RPython æœ€åˆæ˜¯ç‚º PyPy é …ç›®è€Œé–‹ç™¼çš„")]),t._v("ã€‚PyPy æ˜¯ Python èªè¨€çš„å¦ä¸€å€‹å¯¦ç¾ï¼Œæ—¨åœ¨æä¾›æ›´é«˜çš„é‹è¡Œæ™‚æ€§èƒ½ã€‚PyPy çš„ç‰¹é»ä¹‹ä¸€æ˜¯å®ƒå¯ä»¥é€éç·¨è­¯å™¨æŠ€è¡“å³æ™‚ï¼ˆJITï¼‰ç·¨è­¯ Python ä»£ç¢¼ï¼Œä»¥æé«˜åŸ·è¡Œé€Ÿåº¦ã€‚ "),o("mark",[t._v("ç‚ºäº†ä½¿ PyPy çš„ JIT ç·¨è­¯å™¨èƒ½å¤ æ­£ç¢ºåœ°è™•ç† Python ä»£ç¢¼ï¼Œé–‹ç™¼äººå“¡å‰µå»ºäº† RPython")]),t._v("ï¼Œé€™æ˜¯ä¸€ç¨®å—é™åˆ¶çš„ Python å­é›†ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹é»ï¼š")]),t._v(" "),o("ol",[o("li",[o("p",[t._v("éœæ…‹é¡å‹ï¼šRPython è¦æ±‚åœ¨ç¨‹å¼ç¢¼ä¸­è²æ˜è®Šæ•¸çš„é¡å‹ï¼Œå¾è€Œé€²è¡Œéœæ…‹é¡å‹æª¢æŸ¥ã€‚é€™æ¨£åšæ˜¯ç‚ºäº†åœ¨ JITï¼ˆå³æ™‚ç·¨è­¯ï¼‰éç¨‹ä¸­é€²è¡Œå„ªåŒ–å’Œç”Ÿæˆæ›´é«˜æ•ˆçš„æ©Ÿå™¨ç¢¼ã€‚")])]),t._v(" "),o("li",[o("p",[t._v("é™åˆ¶å‹•æ…‹ç‰¹æ€§ï¼šRPython å»é™¤äº†ä¸€äº› Python çš„å‹•æ…‹ç‰¹æ€§ï¼Œä¾‹å¦‚å‹•æ…‹å±¬æ€§å’Œé‹è¡Œæ™‚çš„é¡å‹ä¿®æ”¹ã€‚é€™æ¨£åšæ˜¯ç‚ºäº†ä½¿å¾— JIT ç·¨è­¯å™¨å¯ä»¥æ›´å®¹æ˜“åœ°ç”Ÿæˆæœ‰æ•ˆçš„æ©Ÿå™¨ç¢¼ã€‚")])]),t._v(" "),o("li",[o("p",[t._v("JIT ç·¨è­¯æ”¯æ´ï¼šRPython çš„æœ€å¤§ç”¨é€”æ˜¯ä½œç‚º PyPy é …ç›®çš„æ ¸å¿ƒï¼Œå®ƒå…è¨± PyPy é€²è¡Œ JIT ç·¨è­¯ï¼Œå¾è€Œæé«˜ Python ç¨‹å¼ç¢¼çš„åŸ·è¡Œæ€§èƒ½ã€‚")])]),t._v(" "),o("li",[o("p",[t._v("è·¨å¹³å°ï¼šRPython å’Œ PyPy æ”¯æ´å¤šç¨®ä¸»æµä½œæ¥­ç³»çµ±ï¼Œé€™ä½¿å¾—æ‚¨å¯ä»¥åœ¨ä¸åŒå¹³å°ä¸Šé‹è¡Œå’Œæ¸¬è©¦æ‚¨çš„ Python ç¨‹å¼ç¢¼ã€‚")])])]),t._v(" "),o("p",[t._v("é›–ç„¶ RPython ä¸»è¦æ˜¯ç‚º PyPy é …ç›®è€Œå‰µå»ºçš„ï¼Œä½†å®ƒä¹Ÿå¯ä»¥ç”¨æ–¼å…¶ä»–é¡ä¼¼çš„é …ç›®ï¼Œå°‡å…¶ä»–å‹•æ…‹èªè¨€è½‰æ›ç‚ºç·¨è­¯çš„å½¢å¼ã€‚ç„¶è€Œï¼Œç”±æ–¼ RPython æ˜¯ Python å­é›†ï¼Œå®ƒèˆ‡æ¨™æº– Python èªè¨€å­˜åœ¨ä¸€äº›å·®ç•°ï¼Œå› æ­¤ä¸æ˜¯æ‰€æœ‰çš„ Python ä»£ç¢¼éƒ½èƒ½åœ¨ RPython ä¸­é‹è¡Œã€‚")]),t._v(" "),o("h2",{attrs:{id:"ä¸‰ã€-rpython-translation-toolchain"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€-rpython-translation-toolchain"}},[t._v("#")]),t._v(" ä¸‰ã€ Rpython Translation Toolchain")]),t._v(" "),o("p",[t._v("åŸæœ¬ Pypy å…·æœ‰å…©å€‹ç‰¹è‰²")]),t._v(" "),o("ol",[o("li",[t._v("Python Interpreter å¯¦ä½œ")]),t._v(" "),o("li",[t._v("Dynamic Language Interpreter Framework")])]),t._v(" "),o("p",[t._v("åœ¨ä¹‹å¾Œå·²ç¶“å°‡ä¸€å’ŒäºŒçš„å®šç¾©åˆ‡é–‹äº†ï¼Œç¾åœ¨ Pypy åªæ˜¯å–®ç´”ç”¨ Rpython Translation Toolchain å¯«çš„ Python JIT Interpreterã€‚")]),t._v(" "),o("p",[t._v("è‡³æ–¼ç¬¬äºŒå€‹ Compiler Frameworkï¼Œä½ å¯ä»¥åˆ©ç”¨ Rpython é€™å€‹é«˜éšå‹•æ…‹èªè¨€ï¼Œæ’°å¯«å‹•æ…‹èªè¨€çš„ç›´è­¯å™¨ï¼Œä¸¦ç·¨è­¯æˆåŸ·è¡Œæª”ã€‚(framework for implementing dynamic languages and generating virtual machines for them.)")]),t._v(" "),o("p",[t._v("é€é Rpython é«˜éšå‹•æ…‹èªè¨€æ›´æ–¹ä¾¿å¯¦ä½œç›´è­¯å™¨ï¼Œæ›´é€²ä¸€æ­¥åˆ©ç”¨ Toolchain å»æœ€ä½³åŒ– "),o("mark",[t._v("ç”¨é«˜éšèªè¨€æ’°å¯«çš„ç›´è­¯å™¨")]),t._v("ï¼Œå¯ä»¥ç”¨æ›´çŸ­çš„æ™‚é–“ç”¢ç”Ÿæˆ–æ’°å¯«å‡ºæ›´é«˜æ•ˆç‡çš„ç›´è­¯å™¨ã€‚")]),t._v(" "),o("p",[t._v("ä½†æ˜¯ RPython çš„ç‰¹é»æ˜¯å®ƒçš„ type æ˜¯ inferable çš„ï¼Œ æ‰€ä»¥é›–ç„¶ä¸€æ¨£ä¸å¯«å‡º typeï¼Œä½†æ˜¯å¯ä»¥åšåˆ° statically typedï¼Œ è€Œ PyPy çš„ RPython toolchain æœƒæŠŠ RPython çš„ code è½‰æˆ C code å†ä¸Ÿçµ¦ GCC æˆ– Clang é€™é¡ C compiler ä¾† compile æˆ native codeï¼Œ è—‰æ­¤ä½ å¯ä»¥ç²å¾— native code çš„ interpreterï¼Œ"),o("mark",[t._v("æ‰€ä»¥æœƒè·‘çš„æ¯”åŸæœ¬ç–Šåœ¨ interpreter ä¸Šçš„ interpreter ä¾†çš„å¿«")]),t._v(" ï¼Œ åœ¨é€™ç•¶ä¸­ PyPy é‚„å¯ä»¥å¹«ä½ è™•ç† Garbage Collecion å’Œ JITã€‚")]),t._v(" "),o("h2",{attrs:{id:"å››ã€-conclusion"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€-conclusion"}},[t._v("#")]),t._v(" å››ã€ Conclusion")]),t._v(" "),o("ul",[o("li",[o("p",[t._v("pypy")]),t._v(" "),o("ul",[o("li",[t._v("ç”¨ RPython æ­é…Rpython Translation Toolchain æ’°å¯«çš„ Python Interpreter with JIT")]),t._v(" "),o("li",[t._v("åŸ·è¡Œæ™‚å°‡ Python Bytecode è½‰æ›ç‚ºæœ¬æ©Ÿæ©Ÿå™¨ç¢¼")])])]),t._v(" "),o("li",[o("p",[t._v("Rpython (Translation Toolchain)")]),t._v(" "),o("ul",[o("li",[t._v("Dynamic Language Frameworkï¼Œç”Ÿæˆå‹•æ…‹èªè¨€ç›´è­¯å™¨çš„å‹•æ…‹èªè¨€æ¡†æ¶")]),t._v(" "),o("li",[t._v("æ’°å¯« Dynamic Languages çš„ Interpreter çš„ framework")]),t._v(" "),o("li",[t._v("ç”¨ Rpython å¯« interpreterï¼Œç”¢ç”Ÿé«˜æ•ˆç‡çš„ interpreter")]),t._v(" "),o("li",[t._v("æ”¹å–„ç”¨ interpreter èªè¨€å¯¦ä½œ interpreter æ•ˆèƒ½ä½è½çš„å•é¡Œ")]),t._v(" "),o("li",[t._v("å¹«æˆ‘å€‘ç”¨ Rpython ç¨‹å¼ç¢¼è½‰æˆ C code åšæœ€ä½³åŒ–")])])])]),t._v(" "),o("p",[t._v("åœ¨ä¸‹ä¸€ç« ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ Rpython Toolchain å»æ’°å¯« Brainfuck èªè¨€ä»¥åŠæœ€ä½³åŒ–ğŸ¤£")]),t._v(" "),o("h2",{attrs:{id:"äº”ã€åƒè€ƒè³‡æº"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#äº”ã€åƒè€ƒè³‡æº"}},[t._v("#")]),t._v(" äº”ã€åƒè€ƒè³‡æº")]),t._v(" "),o("ol",[o("li",[o("p",[o("a",{attrs:{href:"https://wdv4758h.github.io/notes/blog/pypy-brainfuck.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("pypy-brainfuck"),o("OutboundLink")],1)])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/447307410",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ·±å…¥ç†è§£ RPython"),o("OutboundLink")],1)])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://indico.cern.ch/event/76896/contributions/2092315/attachments/1054385/1503389/WlavCoreSW_120110.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("Recent Performance Results with PyPy"),o("OutboundLink")],1)])]),t._v(" "),o("li",[o("p",[o("a",{attrs:{href:"https://www.math.wsu.edu/kcooper/JIT.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("Just in time compilation"),o("OutboundLink")],1)])])])])}),[],!1,null,null,null);n.default=y.exports}}]);