(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{807:function(t,r,a){"use strict";a.r(r);var e=a(5),i=Object(e.a)({},(function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("æœ¬ç¯‡æ–‡ç« å°‡ä»‹ç´¹ Android è™›æ“¬æ©Ÿçš„ä½¿ç”¨ï¼Œä»¥åŠç•¶ä½ ä¸‹è¼‰ google play æ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œä½ çš„æ‰‹æ©Ÿåˆ°åº•å¹«ä½ åšäº†ä»€éº¼äº‹æƒ…ã€‚è‘—é‡åœ¨æ‡‰ç”¨ç¨‹å¼å¾ç·¨è­¯åˆ°åŸ·è¡Œçš„æµç¨‹ã€‚")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("img",{attrs:{src:"https://www.androidpolice.com/wp-content/themes/ap2/ap_resize/ap_resize.php?src=https%3A%2F%2Fwww.androidpolice.com%2Fwp-content%2Fuploads%2F2019%2F08%2F29-e1566447953900.png&w=728",alt:""}})]),t._v(" "),a("th",[a("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Android_operating_system.gif/330px-Android_operating_system.gif",alt:""}})])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Android æ¯ä¸€å€‹ç‰ˆæœ¬éƒ½æœƒç”¨ä¸€å€‹ç”œé»å‘½åï¼Œå¥½ã„˜å¥½ã„˜ã€‚ä¸éå¯æƒœçš„æ˜¯ï¼ŒGoogle å®£å¸ƒå¾Android Q é–‹å§‹ä¸å†ä»¥ç”œå“å‘½å QQ")]),t._v(" "),a("td",[t._v("Android å„ç‰ˆæœ¬çš„å½©è›‹")])])])]),t._v(" "),a("h2",{attrs:{id:"ä¸€ã€-android-runtime-çš„ç°¡ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€-android-runtime-çš„ç°¡ä»‹"}},[t._v("#")]),t._v(" ä¸€ã€ Android Runtime çš„ç°¡ä»‹")]),t._v(" "),a("h3",{attrs:{id:"_1-1-overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-overview"}},[t._v("#")]),t._v(" 1-1. Overview")]),t._v(" "),a("p",[t._v("Android Runtimeï¼ˆç¸®å¯«ç‚ºARTï¼‰ï¼Œæ˜¯ä¸€ç¨®åœ¨Androidä½œæ¥­ç³»çµ±ä¸Šçš„åŸ·è¡Œç’°å¢ƒï¼ŒAndroid ä½¿ç”¨è™›æ“¬æ©Ÿå»åŸ·è¡Œ android æ‡‰ç”¨ç¨‹å¼çš„ APK æ–‡ä»¶ï¼Œåœ¨ Andoird 2.2 å¼•å…¥ Dalvikè™›æ“¬æ©Ÿï¼Œåœ¨è™›æ“¬æ©ŸåŸ·è¡Œçš„éç¨‹ä¸­ï¼Œä¸æ–·åˆ©ç”¨é€£çºŒçš„æ•ˆèƒ½åˆ†ææ­é…åŠæ™‚ç·¨è­¯æŠ€è¡“ä¾†æœ€ä½³åŒ–ç¨‹å¼ç¢¼çš„åŸ·è¡Œã€‚è€Œå¾Œå¼•é€²çš„ ART å¯ä»¥æŠŠæ‡‰ç”¨ç¨‹å¼çš„ bytecode ç›´æ¥è½‰æ›æˆ machine codeï¼Œæ˜¯ android çš„æ–°çš„è™›æ“¬æ©Ÿã€‚ARTå¼•å…¥äº†AOTé€™ç¨®é ç·¨è­¯æŠ€è¡“ï¼Œåœ¨æ‡‰ç”¨ç¨‹å¼å®‰è£çš„éç¨‹ä¸­ï¼ŒARTå°±å·²ç¶“å°‡æ‰€æœ‰çš„ä½å…ƒçµ„ç¢¼é‡æ–°ç·¨è­¯æˆäº†æ©Ÿå™¨ç¢¼ã€‚å› æ­¤åœ¨ç”¨ google play ä¸‹è¼‰æ‡‰ç”¨ç¨‹å¼æ™‚éœ€è¦äº‹å…ˆç·¨è­¯ï¼Œæ™‚é–“æ‰æœƒç¨å¾®ä¹…ä¸€é»ã€‚æ‡‰ç”¨ç¨‹å¼åŸ·è¡Œéç¨‹ä¸­ç„¡éœ€é€²è¡Œå³æ™‚çš„ç·¨è­¯å·¥ä½œï¼Œåªéœ€è¦é€²è¡Œç›´æ¥å‘¼å«ã€‚å› æ­¤ï¼ŒARTæ¥µå¤§çš„æé«˜äº†æ‡‰ç”¨ç¨‹å¼çš„åŸ·è¡Œæ•ˆç‡ï¼ŒåŒæ™‚ä¹Ÿæ¸›å°‘äº†æ‰‹æ©Ÿçš„é›»é‡æ¶ˆè€—ï¼Œæé«˜äº†è¡Œå‹•è£ç½®çš„çºŒèˆªèƒ½åŠ›ï¼Œåœ¨åƒåœ¾å›æ”¶ç­‰æ©Ÿåˆ¶ä¸Šä¹Ÿæœ‰äº†è¼ƒå¤§çš„æå‡ã€‚æ¥ä¸‹ä¾†å°±ä»”ç´°ä»‹ç´¹ Android æ©Ÿåˆ¶ã€‚")]),t._v(" "),a("p",[t._v("å…ˆé™„ä¸ŠæŠ€è¡“è®Šé·çš„æ™‚é–“è»¸ï¼Œè®“ä½ çŸ¥é“ Android æŠ€è¡“ç¶“æ­·äº†å››æ¬¡é‡å¤§è®Šé·ã€‚\n"),a("img",{attrs:{src:"https://miro.medium.com/max/700/1*oLO0ahW043xHq_Jg0q8twQ.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_1-2-ç‚ºä»€éº¼-android-éœ€è¦ä½¿ç”¨è™›æ“¬æ©Ÿå»åŸ·è¡Œç¨‹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-ç‚ºä»€éº¼-android-éœ€è¦ä½¿ç”¨è™›æ“¬æ©Ÿå»åŸ·è¡Œç¨‹å¼"}},[t._v("#")]),t._v(" 1-2. ç‚ºä»€éº¼ Android éœ€è¦ä½¿ç”¨è™›æ“¬æ©Ÿå»åŸ·è¡Œç¨‹å¼ ?")]),t._v(" "),a("p",[t._v("ä½ å¯èƒ½æœƒè¦ºå¾—å¾ˆå¥‡æ€ªï¼Œandroid OS ä¸æ˜¯ unix-like çš„ä½œæ¥­ç³»çµ±å— ? é‚£ç‚ºä½•ç¨‹å¼ä¸ç›´æ¥è·‘åœ¨ä¸Šé¢å°±å¥½äº†ï¼Œé‚„è¦éš”ä¸€å±¤è™›æ“¬æ©Ÿæ‰èƒ½åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼ã€‚åƒè€ƒ"),a("a",{attrs:{href:"https://stackoverflow.com/questions/9913702/why-does-android-need-a-virtual-machinedvm/9913753",target:"_blank",rel:"noopener noreferrer"}},[t._v("é€™ç¯‡å•ç­”"),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_1-å›åˆ°æˆ‘å€‘ä½¿ç”¨è™›æ“¬æ©Ÿçš„åˆè¡·-è·¨å¹³å°-write-once-run-every-where-ã€‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å›åˆ°æˆ‘å€‘ä½¿ç”¨è™›æ“¬æ©Ÿçš„åˆè¡·-è·¨å¹³å°-write-once-run-every-where-ã€‚"}},[t._v("#")]),t._v(" 1. å›åˆ°æˆ‘å€‘ä½¿ç”¨è™›æ“¬æ©Ÿçš„åˆè¡· - è·¨å¹³å° ( Write once, Run every where)ã€‚")]),t._v(" "),a("p",[t._v("ç¾åœ¨çš„è¡Œå‹•è£ç½®ç¡¬é«”æŒ‡ä»¤é›†æ¶æ§‹çš„å¤šæ¨£æ€§(x86, MIPS, ARM, RISC-V...)ï¼Œæˆ‘å€‘éœ€è¦è—‰ç”±è™›æ“¬æ©Ÿåˆ©ç”¨ä¸­é–“ç¨‹å¼ç¢¼çš„ç›´è­¯ï¼Œæ‰èƒ½é”åˆ°è·¨å¹³å°çš„æ•ˆæœã€‚åŒæ™‚ä»–å€‘ä¹Ÿå€Ÿé¡ Java çš„ç²¾ç¥ï¼Œè¨­è¨ˆå‡ºé¡ä¼¼çš„åŸ·è¡Œæµç¨‹ï¼Œä¹ŸæŠŠ Java ç•¶æˆ android ç¨‹å¼è¨­è¨ˆçš„ä¸»è¦èªè¨€ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_2-java-interface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-java-interface"}},[t._v("#")]),t._v(" 2. Java Interface")]),t._v(" "),a("p",[t._v("é›–ç„¶ Android OS æ˜¯ä½¿ç”¨ C å»æ’°å¯«çš„ï¼Œä½†æ˜¯æ“ä½œä½œæ¥­ç³»çµ±çš„ OS API æ˜¯ä½¿ç”¨ Java å¯«çš„ï¼Œç‚ºä»€éº¼ä½¿ç”¨ Java å°±å¦‚ç¬¬ä¸€é»æ‰€è¿°ï¼ŒGoogle å·¥ç¨‹å¸«è¨­è¨ˆäº†å¾ˆå¤š Android API å»ä½¿ç”¨ Java çš„ä»‹é¢ï¼Œè€Œ Java æœ¬èº«å°±æ˜¯è·‘åœ¨è™›æ“¬æ©Ÿä¸Šã€‚JVM æœ¬èº«æ˜¯ä¸€å€‹ stack-based VMï¼Œè€Œ Android çš„ VMï¼ˆç¨±ç‚º Dalvikï¼‰æ˜¯ä¸€å€‹ register-based VMï¼ˆé€™æ˜¯ç‚ºäº†ç”Ÿæˆæ›´å°‘çš„ç¨‹å¼ç¢¼å’Œæ›´å¿«çš„é€Ÿåº¦ï¼Œä»¥ä¾¿å¾ä½¿ç”¨ Android çš„ä»»ä½•è¨­å‚™ä¸­ç²å¾—æ›´å¥½çš„æ€§èƒ½ï¼‰ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_1-3-process-vm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-process-vm"}},[t._v("#")]),t._v(" 1-3. Process VM")]),t._v(" "),a("p",[t._v("åœ¨å…ˆå‰çš„æ–‡ç« æœ‰æåˆ° Process VM çš„æ¦‚å¿µï¼Œç°¡å–®ä¾†èªªå®ƒå°±è·Ÿä½œæ¥­ç³»çµ±ä¸€èˆ¬çš„ process ä¸€æ¨£ï¼Œåªæ˜¯ä¸»è¦æ˜¯è®“ç¨‹å¼èªè¨€åœ¨é€™å€‹ Process çš„ç’°å¢ƒä¸‹åŸ·è¡Œï¼Œæ‰€ä»¥åˆç¨±ç‚ºé«˜éšç¨‹å¼èªè¨€è™›æ“¬æ©Ÿ(high-level virtual machine)ã€‚")]),t._v(" "),a("p",[t._v("DVM å®ƒé¡ä¼¼æ–¼ JVMï¼Œä½ æœ‰ .java æ–‡ä»¶ï¼Œé€™äº›æ–‡ä»¶å°‡è¢« java ç·¨è­¯å™¨ç·¨è­¯æˆ "),a("code",[t._v(".class")]),t._v("ã€‚"),a("code",[t._v(".class")]),t._v(" æª”æ¡ˆåªä¸éæ˜¯å°‡ç”± JVM é‹è¡Œçš„bytecodeã€‚JVM å¯ä»¥åŸ·è¡Œåœ¨ä»»ä½•å¹³å°ï¼ˆwindowsã€linux æˆ– unixï¼‰ä¸Šã€‚")]),t._v(" "),a("p",[t._v("åœ¨ android ä¸­ï¼Œé€™äº›æ–‡ä»¶ä¹Ÿè¢«ç·¨è­¯æˆ "),a("code",[t._v(".dex")]),t._v(" æ–‡ä»¶ä¸¦ç”± "),a("code",[t._v("DVM")]),t._v(" é‹è¡Œã€‚åªæ˜¯ç‚ºäº†æä¾›ä¸€å€‹æƒ³æ³•ï¼Œç•¶å®‰è£æ‡‰ç”¨ç¨‹åºæ™‚ï¼ŒAndroid æ“ä½œç³»çµ±æœƒåˆ†é…å”¯ä¸€çš„ linux ç”¨æˆ¶ IDï¼Œç‚ºæ¯å€‹æ‡‰ç”¨ç¨‹åºåˆ†é…ä¸€å€‹ DVMã€‚æ‰€ä»¥ç°¡è€Œè¨€ä¹‹ï¼Œæ¯å€‹æ‡‰ç”¨ç¨‹åºéƒ½æœ‰è‡ªå·±çš„ linux é€²ç¨‹ã€DVM å’Œ linux ç”¨æˆ¶ IDã€‚java æ–‡ä»¶è¢«ç·¨è­¯æˆ "),a("code",[t._v(".dex")]),t._v(" æ–‡ä»¶ï¼Œèˆ‡ "),a("code",[t._v(".class")]),t._v(" æ–‡ä»¶ç›¸æ¯”ï¼Œå®ƒæ¶ˆè€—çš„å…§å­˜æ›´å°‘ã€‚")]),t._v(" "),a("p",[a("mark",[t._v("ç¾åœ¨å‡è¨­ 10 å€‹æ‡‰ç”¨ç¨‹åºæœ‰ 10 å€‹å–®ç¨çš„ DVMï¼Œè€Œ 10 å€‹å–®ç¨çš„ DVM å°æ–¼ä½œæ¥­ç³»çµ±ä¾†èªªç›¸ç•¶æ–¼æœ‰ 10 å€‹è¡Œç¨‹è¦è™•ç†ã€‚")]),t._v("\nAndroid OS ä¸­çš„ dispatcher æˆ–scheduler è² è²¬è™•ç†é€™ 10 å€‹ Processï¼Œé€™å°±æ˜¯æˆ‘å€‘æœ‰ android Activity ç”Ÿå‘½é€±æœŸçš„åŸå› ã€‚\næ‚¨éœ€è¦ DVM ä¾†ç¶­è­·æ¯å€‹è¡Œç¨‹ï¼ˆæ¯å€‹æ‡‰ç”¨ç¨‹åºï¼‰çš„åŸ·è¡Œç‹€æ…‹ã€‚")]),t._v(" "),a("h2",{attrs:{id:"äºŒ-android-èµ·æº-dalvik-vm-jit-æŠ€è¡“-android-kitkat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äºŒ-android-èµ·æº-dalvik-vm-jit-æŠ€è¡“-android-kitkat"}},[t._v("#")]),t._v(" äºŒ. Android èµ·æº - Dalvik VM + JIT æŠ€è¡“ ( Android KitKat )")]),t._v(" "),a("h3",{attrs:{id:"_2-1-ä»€éº¼æ˜¯-apk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ä»€éº¼æ˜¯-apk"}},[t._v("#")]),t._v(" 2-1. ä»€éº¼æ˜¯ APK ?")]),t._v(" "),a("p",[t._v("é™¤äº†åœ¨ä¸€èˆ¬ Google Play ä¸Šä¸‹è¼‰æ‡‰ç”¨ç¨‹å¼ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰è‡ªè¡Œä¸‹è¼‰é APK æª”æ¡ˆå®‰è£ï¼Œæœ‰æ™‚å¾Œéœ€è¦ä»˜è²»çš„ APP è¢«é€†å‘å·¥ç¨‹ç ´è§£å¾Œï¼Œä½ ä¹Ÿå¯ä»¥é€é APK æª”æ¡ˆç›´æ¥å®‰è£å…ä»˜éŒ¢çš„ç ´è§£æª”APK(çˆ½æ­»ğŸ˜)ï¼Œé‚£åˆ°åº•ä»€éº¼æ˜¯APKï¼Œæ ¹æ“š"),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/APK",target:"_blank",rel:"noopener noreferrer"}},[t._v("APK çš„ wiki"),a("OutboundLink")],1),t._v("ï¼Œä¸€å€‹Androidæ‡‰ç”¨ç¨‹å¼çš„ç¨‹å¼ç¢¼æƒ³è¦åœ¨Androidè£ç½®ä¸ŠåŸ·è¡Œï¼Œå¿…é ˆå…ˆé€²è¡Œç·¨è­¯ï¼Œç„¶å¾Œè¢«æ‰“åŒ…æˆç‚ºä¸€å€‹è¢«Androidç³»çµ±çš„è™›æ“¬æ©Ÿæ‰€èƒ½è¾¨è­˜çš„æª”æ¡ˆæ‰å¯ä»¥è¢«åŸ·è¡Œï¼Œè€Œé€™ç¨®èƒ½è¢«Androidè™›æ“¬æ©Ÿè¾¨è­˜ä¸¦åŸ·è¡Œçš„æª”æ¡ˆæ ¼å¼ä¾¿æ˜¯ã€ŒAPKã€ã€‚ ä¸€å€‹APKæª”æ¡ˆå…§åŒ…å«è¢«ç·¨è­¯çš„ä»£ç¢¼æª”æ¡ˆ(.dex æª”æ¡ˆ)ï¼Œæª”æ¡ˆè³‡æºï¼ˆresourcesï¼‰ï¼Œ assetsï¼Œæ†‘è­‰ï¼ˆcertificatesï¼‰ï¼Œå’Œæ¸…å–®æª”æ¡ˆï¼ˆmanifest fileï¼‰ã€‚")]),t._v(" "),a("img",{attrs:{src:"https://i.imgur.com/Lm845zc.png",height:"200"}}),t._v(" "),a("p",[t._v("å¦‚ä¸Šåœ–ï¼Œä¸€å€‹ APK é€šå¸¸ç”±è¨±å¤š "),a("code",[t._v(".dex")]),t._v(" æª”æ¡ˆï¼Œçµ„åˆå†ä¸€èµ·ï¼Œ"),a("code",[t._v(".dex")]),t._v(" åŒ…å«æˆ‘å€‘æ’°å¯«çš„ç¨‹å¼ç¢¼ä»¥åŠä½¿ç”¨åˆ°çš„å‡½å¼åº«ï¼Œç‚º Bytecodeï¼Œå°±åƒæ˜¯ Java è¦å…ˆç·¨è­¯æˆ "),a("code",[t._v(".class")]),t._v(" bytecode å¾Œæ‰èƒ½çµ¦ JVM å»ç›´è­¯ï¼Œ"),a("code",[t._v(".dex")]),t._v(" æª”å¯ä»¥è¢« Android VM æ‰€ç›´è­¯ã€‚Bytecode ç”±æˆ‘å€‘çš„ android runtime interpreter ç¿»è­¯æˆ CPU å¯ä»¥æ‡‚å¾—æŒ‡ä»¤ï¼ŒåŒæ™‚ ART ä¹ŸæŒç®¡è¨˜æ†¶é«”å’Œåƒåœ¾ç®¡ç†ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://miro.medium.com/max/700/1*s_IOOXkGPxu-FM5hSe9hoA.png",alt:""}})]),t._v(" "),a("p",[t._v("å¾åŸå§‹ç¢¼åˆ°APKçš„ç·¨è­¯æµç¨‹å¦‚ä¸‹ï¼Œæˆ‘æ‰¾äº†å…©å¼µåœ–ç‰‡å¯ä»¥äº¤å‰åƒè€ƒã€‚")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("æµç¨‹åœ–ä¸€")]),t._v(" "),a("th",[t._v("æµç¨‹åœ–äºŒ")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-11bacdf685c1464910f87479f260a014_1440w.jpg",alt:""}})]),t._v(" "),a("td",[a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6L3l5THZ5MjA0eFc5NHBUOXN2eVpZU0FjZFQwaWNMSlZDUms3Qk96QmhXUEdsVlZxOE44VzV4ejdpYlZlM2pWbGV2WDJpY2RTc2tZa0VFVmJnVUp1RVRzRXFRLzY0MA?x-oss-process=image/format,png",alt:""}})])])])]),t._v(" "),a("p",[t._v("1.é€šéAAPT(Android Assets Packing Tool)ç·¨è­¯è³‡æºæ–‡ä»¶ï¼Œå°‡è³‡æºæ–‡ä»¶æ‰“åŒ…ç·¨è­¯ä¸¦ç”Ÿæˆç”ŸæˆR.javaæ–‡ä»¶ï¼Œå°±æ˜¯æ”¾å„ç¨®è³‡æºIdçš„é‚£å€‹æ–‡ä»¶ã€‚")]),t._v(" "),a("p",[t._v("2.é€šé "),a("code",[t._v("Java ç·¨è­¯å™¨ javac")]),t._v(" å°‡ java ç¨‹å¼ç¢¼ç·¨è­¯ç‚º"),a("code",[t._v(".class")]),t._v(" bytecode")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("mark",[t._v("é€šé"),a("code",[t._v("Dalvikç·¨è­¯å™¨")]),t._v("å°‡"),a("code",[t._v(".class")]),t._v("è½‰åŒ–ç‚º"),a("code",[t._v(".dex")])])])]),t._v(" "),a("p",[t._v("4.é€šé Apk builder å°‡æ‰“åŒ…å¾Œçš„è³‡æºèˆ‡"),a("code",[t._v(".dex")]),t._v("æ–‡ä»¶ä¸€èµ·ç”Ÿæˆ"),a("code",[t._v("APK")]),t._v("æ–‡ä»¶")]),t._v(" "),a("h3",{attrs:{id:"_2-2-ç”¨æ™‚é–“æ›ç©ºé–“çš„-dalvik-vm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ç”¨æ™‚é–“æ›ç©ºé–“çš„-dalvik-vm"}},[t._v("#")]),t._v(" 2-2. ç”¨æ™‚é–“æ›ç©ºé–“çš„ Dalvik VM")]),t._v(" "),a("p",[t._v("æ—©æœŸçš„æ™ºæ…§å‹æ‰‹æ©Ÿç¡¬é«”è³‡æºååˆ†æœ‰é™ï¼Œè¨˜æ†¶é«”å®¹é‡éƒ½å¾ˆå°(256MBæˆ–æ›´å°)ï¼Œç‚ºäº†æœ€ä½³åŒ–è¨˜æ†¶é«”çš„ä½¿ç”¨ç‡ï¼ŒDalvik VM å°±éš¨ä¹‹å‡ºç”Ÿäº†ï¼Œç›´è­¯æ™‚æ­é…åŠæ™‚ç·¨è­¯æŠ€è¡“(Just in time compilation)ï¼Œå› ç‚ºæ—©æœŸçš„ APP è¦æ¨¡è¼ƒå°ï¼Œæ‰€ä»¥åœ¨åšåŠæ™‚ç·¨è­¯æŠ€è¡“æ™‚é›–ç„¶æœƒæš«å­˜ç†±é»æ©Ÿå™¨ç¢¼åœ¨è¨˜æ†¶é«”ï¼Œä½†æ˜¯æ¯”èµ·æ•´å€‹ç¨‹å¼å…ˆç·¨è­¯å¥½å†ç›´æ¥æ”¾å…¥è¨˜æ†¶é«”ï¼Œç›´è­¯å™¨é‚Šç¿»è­¯é‚ŠåŸ·è¡Œå†åŠ ä¸ŠåŠæ™‚ç·¨è­¯æŠ€è¡“çŠ§ç‰²å°‘é‡çš„è¨˜æ†¶é«”æˆæœ¬ï¼Œæ›å–æ›´å¤§çš„åŸ·è¡Œæ•ˆç‡ä»¥åŠè¨˜æ†¶é«”ç©ºé–“ã€‚ä½†å…¶å¯¦ç›¸ç•¶æœ‰é™ï¼Œå› ç‚ºæ—©æœŸè¨˜æ†¶é«”å®¹é‡æ¯”è¼ƒå°ã€‚")]),t._v(" "),a("p",[t._v("ä¸‹åœ–ç‚º Dalvik VM å•Ÿå‹• APP çš„æµç¨‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-7ae741c2dfc5036a3eff58bc0e1dcdec_1440w.jpg",alt:""}})]),t._v(" "),a("p",[t._v("æ‰€ä»¥åœ¨ Android KitKat çš„æ•´é«”æµç¨‹å¦‚ä¸‹åœ–")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://miro.medium.com/max/700/0*AHlBCn_G4WB5R4RV.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_2-3-android-kitkat-çš„å„ªç¼ºé»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-android-kitkat-çš„å„ªç¼ºé»"}},[t._v("#")]),t._v(" 2-3. Android KitKat çš„å„ªç¼ºé»")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å„ªé»")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å®‰è£é€Ÿåº¦è¶…å¿«")]),t._v(" "),a("p",[t._v("å› ç‚ºä¸‹è¼‰å¾Œç¨‹å¼ç¢¼ä¸ç”¨ç·¨è­¯ï¼Œç›´æ¥ç”¨è™›æ“¬æ©ŸåŸ·è¡Œ bytecode å°±å¥½ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å„²å­˜ç©ºé–“å°")]),t._v(" "),a("p",[t._v("åŒæ¨£çš„ï¼Œä¸‹è¼‰å¾Œä¸éœ€è¦ç·¨è­¯ï¼Œç›´æ¥åŸ·è¡Œè¼‰ä¸‹ä¾†çš„ bytecode å°±å¥½ã€‚")])])])]),t._v(" "),a("li",[a("p",[t._v("ç¼ºé»")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("dex è¼‰å…¥çš„æ™‚å€™æœƒéå¸¸æ…¢")]),t._v(" "),a("p",[t._v("å› ç‚ºåœ¨dexåŠ è¼‰æ™‚æœƒé€²è¡Œ dexoptï¼ŒæŠŠ dex æª”æ¡ˆæœ€ä½³åŒ–æˆ odexæª”")])]),t._v(" "),a("li",[a("p",[t._v("JIT compilation Overhead")]),t._v(" "),a("p",[t._v("å› ç‚ºå¾ŒæœŸçš„ APP è¦æ¨¡é€æ¼¸æˆé•·ï¼ŒJIT ç›£æ§çš„è² æ“”ä¹Ÿè¶Šä¾†è¶Šé‡ï¼ŒJIT ç·¨è­¯æ™‚æœ‰æ™‚ä¹Ÿæœƒåœé “ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("Battery Overhead")]),t._v(" "),a("p",[t._v("å› ç‚º JIT çš„ monitor è¦ä¸€ç›´ç›£æ§ï¼Œæ¯æ¬¡é‡æ–°å•Ÿå‹•éƒ½è¦é‡æ–°ç›£æ§ã€é‡æ–°JITç·¨è­¯ï¼ŒèŠ±è²»å¾ˆå¤š CPU è³‡æºï¼Œå°æ–¼æ‰‹æ©Ÿä¾†èªªéå¸¸è€—é›»ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("é¦–æ¬¡å•Ÿå‹•åŸ·è¡Œå¾ˆæ…¢")]),t._v(" "),a("p",[t._v("å› ç‚ºåœ¨ç¨‹å¼é€€å‡ºå¾Œé‡æ–°åŸ·è¡Œæ™‚ï¼Œå‰›å‰›JITå¾—åˆ°çš„ç†±é»ç¨‹å¼ç¢¼è¨Šæ¯éƒ½æ¶ˆå¤±äº†ï¼Œå°‘äº†ç†±é»ç¨‹å¼ç¢¼çš„å¿«å–ï¼Œé™¤äº†åŸ·è¡Œæ™‚æœƒæ¯”è¼ƒæ…¢ï¼Œå†ä¾†æ˜¯ JIT åˆè¦é‡æ–°ç›£æ§ = =")])])])])]),t._v(" "),a("p",[t._v("è€Œå¾Œç”±æ–¼å„²å­˜è£ç½®æŠ€è¡“çš„é€²æ­¥ï¼Œå„²å­˜ç©ºé–“è®Šå¾—éå¸¸å¯¬è£•ï¼Œå› æ­¤åœ¨ Android Lå¾Œï¼Œå°±ä»¥å¶„æ–°çš„è™›æ“¬æ©Ÿ Android Runtime (ART) ä¾†å–ä»£ Dalvik VMã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://miro.medium.com/max/700/1*qhzURrMnWEF6eP-3UAPWtg.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"ä¸‰-ä»¥ç©ºé–“æ›æ™‚é–“-å…¨æ–°-art-çš„æ™‚ä»£-åŠ å…¥-aot-æŠ€è¡“-android-lollipop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰-ä»¥ç©ºé–“æ›æ™‚é–“-å…¨æ–°-art-çš„æ™‚ä»£-åŠ å…¥-aot-æŠ€è¡“-android-lollipop"}},[t._v("#")]),t._v(" ä¸‰. ä»¥ç©ºé–“æ›æ™‚é–“: å…¨æ–° ART çš„æ™‚ä»£ - åŠ å…¥ AOT æŠ€è¡“   ( Android Lollipop )")]),t._v(" "),a("h3",{attrs:{id:"_3-1-aot-ä»‹ç´¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-aot-ä»‹ç´¹"}},[t._v("#")]),t._v(" 3-1. AOT ä»‹ç´¹")]),t._v(" "),a("p",[t._v("ä»¥ä¸‹åœ–ç•¶ä½œæœ¬å°ç¯€çš„é–‹é ­ï¼ŒDVM ä½¿ç”¨ JIT æ–¹å¼ç·¨è­¯ï¼ŒART ä½¿ç”¨ AOT æ–¹å¼ç·¨è­¯ã€‚\n"),a("img",{attrs:{src:"https://miro.medium.com/max/700/0*LMPhjF2BanM_9h8o.png",alt:""}})]),t._v(" "),a("p",[t._v("ART åœ¨ Android L ä¸­çš„å·¥ä½œæ–¹å¼èˆ‡æˆ‘å€‘å¾ Dalvik æ‰€çŸ¥é“çš„ç›¸æ¯”ç™¼ç”Ÿäº† 180 åº¦çš„è®ŠåŒ–ã€‚ART ä¸¦æ²’æœ‰åƒåœ¨ Dalvik ä¸­é‚£æ¨£ä½¿ç”¨åŠæ™‚ç·¨è­¯ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€ç¨®ç¨±ç‚ºæå‰ç·¨è­¯(AOT- Ahead of time compilation)çš„ç­–ç•¥ã€‚é€™ç¨®æ–¹æ³•æ¥µå¤§åœ°æé«˜äº†åŸ·è¡Œæ™‚çš„æ•ˆèƒ½ï¼Œæ¯”åŠæ™‚ç·¨è­¯å¿« 20 å€ã€‚ARTæ˜¯åœ¨ App å®‰è£çš„æ™‚å€™å°‡ .apk æ–‡ä»¶è§£å£“ï¼Œä¸¦å°‡ .dex é ç·¨è­¯ç‚º .oat å¯åŸ·è¡Œæ–‡ä»¶ï¼Œç•¶ App å•Ÿå‹•çš„æ™‚å€™å°±ä¸éœ€è¦åœ¨Runtimeç›´è­¯åŸ·è¡Œäº†ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥åœ¨ Android KitKat çš„æ•´é«”æµç¨‹å¦‚ä¸‹åœ–\n"),a("img",{attrs:{src:"https://miro.medium.com/max/700/0*tz0DhazhoXYZvn1H.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_3-2-android-lollipop-å„ªç¼ºé»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-android-lollipop-å„ªç¼ºé»"}},[t._v("#")]),t._v(" 3-2. Android Lollipop å„ªç¼ºé»")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å„ªé»")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("åŸ·è¡Œæ™‚é€Ÿåº¦è®Šå¿«")]),t._v(" "),a("p",[t._v("ART åœ¨ä¸‹è¼‰æ™‚ï¼Œå·²ç¶“é å…ˆç·¨è­¯å¥½äº†ï¼Œå› ç‚ºå·²ç¶“æ˜¯æ©Ÿå™¨ç¢¼ï¼Œä¸éœ€è¦é‡æ–°ç¿»è­¯ï¼ŒåŸ·è¡Œæ™‚æ•ˆç‡å¤§å¹…æå‡ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åŸ·è¡Œæ™‚ååˆ†çœé›»")]),t._v(" "),a("p",[t._v("å› ç‚ºä¸éœ€è¦ JIT çš„ç›£æ§")])])])]),t._v(" "),a("li",[a("p",[t._v("ç¼ºé»")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("App çš„å®‰è£ã€æ›´æ–°æ™‚é–“è®Šé•·")]),t._v(" "),a("p",[t._v("å› ç‚º App åœ¨å®‰è£æˆ–æ›´æ–°çš„æ™‚å€™ï¼Œéƒ½è¦é€²è¡Œ dex2oat çš„å‹•ä½œï¼Œå°‡ dex é€²è¡Œé ç·¨è­¯ï¼Œæ‰€ä»¥æ™‚é–“æœƒè¼ƒä¹…ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("ä½”ç”¨ç©ºé–“å¤ªå¤§")]),t._v(" "),a("p",[t._v("ä¸è«–æ˜¯å¸¸ç”¨çš„ã€ä¸å¸¸ç”¨çš„ç¨‹å¼ç¢¼ï¼Œéƒ½è¢«ç·¨è­¯æˆä¸€å€‹äºŒé€²ä½æª”æ¡ˆï¼Œå°è‡´ç¨‹å¼ç›¸ç•¶è‚¥å¤§ï¼Œå ç”¨å„²å­˜è¨­å‚™å¤§ï¼ŒåŒæ™‚ä¹Ÿæ›´åƒè¨˜æ†¶é«”ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("æ¨æ£„ JIT - éœæ…‹ç·¨è­¯æˆæœ¬")]),t._v(" "),a("p",[t._v("å‹•æ…‹ç·¨è­¯æŠ€è¡“å¯ä»¥åœ¨åŸ·è¡ŒæœŸç²å¾—éœæ…‹ç·¨è­¯æ‰€æ²’æœ‰çš„ç†±é»ç¨‹å¼ç¢¼çš„è³‡è¨Šï¼Œä¾†åšæ•ˆèƒ½æœ€ä½³åŒ–ã€‚å› æ­¤å¦‚æœæœ‰äº›ä½¿ç”¨è€…ä¸å¸¸ç”¨çš„ç¨‹å¼ç¢¼è¢«éœæ…‹ç·¨è­¯ï¼Œæµªè²»äº†ç·¨è­¯å®ƒçš„æ™‚é–“ï¼Œä¹Ÿæœƒè®“é€™å¡Šä¸å¸¸ç”¨çš„ç¨‹å¼ç¢¼å¸¸é§åœ¨è¨˜æ†¶é«”ã€‚")])])])])]),t._v(" "),a("p",[t._v("è°æ˜çš„ Google å·¥ç¨‹å¸«ï¼Œç•¶ç„¶è¦æ”¹å–„é€™å€‹å¤§ç¼ºé»ï¼Œèƒ½çœå‰‡çœã€èƒ½ç”¨å°±ç”¨ã€‚åœ¨ Android Nougat ç‰ˆæœ¬ï¼Œå°‡æœƒä½¿ç”¨ "),a("code",[t._v("profile-guided compilation")]),t._v(" çš„æŠ€è¡“æ­é…åŠæ™‚ç·¨è­¯æŠ€è¡“ï¼ŒåŒæ™‚çµåˆå‹•æ…‹ç·¨è­¯å’Œéœæ…‹ç·¨è­¯çš„å„ªé»ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å››-æ‘¸æ–—æ‘¸æ–—å—¨å£“è‹¦-profile-guided-compilation-aot-jit-android-nougat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å››-æ‘¸æ–—æ‘¸æ–—å—¨å£“è‹¦-profile-guided-compilation-aot-jit-android-nougat"}},[t._v("#")]),t._v(" å››. æ‘¸æ–—æ‘¸æ–—å—¨å£“è‹¦ - Profile-guided compilation : AOT + JIT ( Android Nougat )")]),t._v(" "),a("h3",{attrs:{id:"_4-1-profile-guided-compilation-ä»‹ç´¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-profile-guided-compilation-ä»‹ç´¹"}},[t._v("#")]),t._v(" 4-1. Profile-guided compilation ä»‹ç´¹")]),t._v(" "),a("p",[t._v("æˆ‘é¸äº†ä¸‰å¼µåœ–ï¼Œå¯ä»¥å…ˆåƒè€ƒä¸€ä¸‹ã€‚\n"),a("img",{attrs:{src:"https://miro.medium.com/max/700/1*hb26HQBJXRwl5lcsML5IoQ.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-d3b288e7d03bebb85401e0200cdf20b5_1440w.jpg",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://miro.medium.com/max/700/0*ZFpIMgR0kKniiery.png",alt:""}})]),t._v(" "),a("ol",[a("li",[a("p",[t._v("ç•¶ä½ é¦–æ¬¡å®‰è£ä¸¦ä¸€å€‹Appçš„æ™‚å€™ï¼ŒAOT ä¸å°‡.dexæ–‡ä»¶ç·¨è­¯ç‚º.oatæ–‡ä»¶ï¼Œé€™ä¸€æ­¥æ¸›å°‘äº†å®‰è£æ™‚é–“ï¼Œç³»çµ±é€šéInterpreterçš„æ–¹å¼ä¾†å•Ÿå‹•Appã€‚")])]),t._v(" "),a("li",[a("p",[t._v("ç•¶åœ¨Appé‹è¡Œéç¨‹ä¸­æ¢æ¸¬åˆ° hot codeï¼Œå°±ä½¿ç”¨JITç·¨è­¯ï¼Œé€™äº›é€šéJITç·¨è­¯çš„å¹³å°ç¨‹å¼ç¢¼æœƒè¢«å­˜å„²åœ¨å¿«å–æˆ–è¨˜æ†¶é«”ä¸­(JIT code cache)ï¼ŒåŠ å¿«ä¸‹æ¬¡åŸ·è¡Œçš„é€Ÿåº¦ï¼Œä¸¦ç”¢ç”Ÿ profile æ–‡ä»¶(ç·¨è­¯é…ç½®æ–‡ä»¶ï¼Œè¨˜éŒ„ç†±é»å‡½æ•¸è¨Šæ¯)å„²å­˜ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("ç•¶è¨­å‚™è™•æ–¼ç©ºé–’æ™‚é–“(IDLE)æˆ–å……é›»ç‹€æ…‹(charging)æ™‚ï¼Œç³»çµ±æ¯éš”ä¸€æ®µæ™‚é–“å°±æœƒå»æƒæ APP ç›®éŒ„ä¸‹ profile æ–‡ä»¶(ç·¨è­¯æ‰€ä½¿ç”¨çš„Daemon Serviceï¼ŒèƒŒæ™¯åŸ·è¡Œ)ï¼Œä¸¦å•Ÿå‹• AOT ç·¨è­¯å™¨(åœ¨é€™è£¡å®˜æ–¹ç¨±ç‚º profile-guided compilation)ï¼Œçµåˆç·¨è­¯é…ç½®æ–‡ä»¶å°‡ç†±é»ä»£ç¢¼ç›¸é—œè³‡è¨Šç·¨è­¯ç‚º .oat å¯åŸ·è¡Œæ–‡ä»¶ã€‚ç•¶å†æ¬¡åŸ·è¡ŒAppæ™‚ï¼ŒART å°±å¯ä»¥ç›´æ¥åŸ·è¡Œ.oatæ–‡ä»¶äº†ã€‚")])])]),t._v(" "),a("p",[a("mark",[t._v("å› ç‚ºæ˜¯ç”¨ JIT ç”¢ç”Ÿçš„ profile å†å¼•å° AOT ç·¨è­¯ï¼Œæ‰€ä»¥æ‰ç¨±ç‚º profile-guided compilationã€‚")])]),t._v(" "),a("p",[t._v("é€™å€‹æ–¹æ³•æœ‰å¹¾å€‹ç‰¹é»è¦æ³¨æ„")]),t._v(" "),a("ol",[a("li",[t._v("JITçš„éç¨‹ä¸­ï¼Œç”Ÿæˆ Offline çš„ Profile")]),t._v(" "),a("li",[t._v("ç³»çµ±å®ˆè­·è¡Œç¨‹æœå‹™ï¼Œå†èƒŒæ™¯ç›£æ§ï¼Œä¸€æ—¦åœ¨å……é›»æˆ–æ˜¯ç©ºé–’ï¼Œå°±æœƒé€²è¡Œ AOT ç·¨è­¯ profile")]),t._v(" "),a("li",[t._v("æ¯å€‹APPéƒ½æœƒæœ‰è‡ªå·±çš„Profileæ–‡ä»¶ï¼Œä¿å­˜åœ¨Appæœ¬èº«çš„Local Storageä¸­")])]),t._v(" "),a("p",[t._v("æ•´é«”çš„ Workflow å¦‚ä¸‹\n"),a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-4b8c58f328667c1fe2c43432940a71d6_1440w.jpg",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_4-2-android-nougat-çš„å„ªç¼ºé»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-android-nougat-çš„å„ªç¼ºé»"}},[t._v("#")]),t._v(" 4-2. Android Nougat çš„å„ªç¼ºé»")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å„ªé»")]),t._v(" "),a("ul",[a("li",[t._v("æ›´è°æ˜ã€ç²¾æº–çš„ç·¨è­¯æ–¹å¼")])]),t._v(" "),a("p",[t._v("ä»¥å¾€éœæ…‹ç·¨è­¯æœ€ä½³åŒ–æ™‚ï¼Œæ‰“ä¸åˆ°(æœ€ä½³åŒ–ä¸åˆ°)çœŸæ­£çš„ç—›é»ï¼Œç¾åœ¨å…ˆä½¿ç”¨ JIT ä¾†æ¢æ¸¬ä¸€ä¸‹ç†±é»ç¨‹å¼ç¢¼å†å¼•å° AOT éœæ…‹ç·¨è­¯ï¼Œç¯€çœæ›´å¤šç©ºé–“ï¼ŒåŒæ™‚åˆå¯ä»¥é«˜æ•ˆç‡åŸ·è¡Œã€‚")]),t._v(" "),a("ul",[a("li",[t._v("å®‰è£ã€æ›´æ–°é€Ÿåº¦æå‡")])]),t._v(" "),a("p",[t._v("AOT æ–¹å¼çš„å£è™•æ˜¯ä¸‹è¼‰å¾Œè¦å…ˆç·¨è­¯ï¼Œé€ æˆæ¯æ¬¡ç¨‹å¼è‡ªå·±æ›´æ–°æ™‚æœƒè®Šæ…¢ï¼Œæ‰‹æ©Ÿæœƒè®Šç†±ï¼Œç¾åœ¨ä¸‹è¼‰å¾Œä¸ç”¨ç¶“éç·¨è­¯çš„éšæ®µã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å”¯ä¸€çš„ç¼ºé»")]),t._v(" "),a("p",[t._v("å› ç‚ºæœ€ä¸€é–‹å§‹ä½¿ç”¨ä»è¦ç¶“é JITï¼Œæ‰€ä»¥å‰å¹¾æ¬¡åŸ·è¡Œæ™‚æœƒæ¯”è¼ƒæ…¢ã€‚")])])]),t._v(" "),a("p",[t._v("åœ¨æ™‚é–“è·Ÿç©ºé–“å®Œç¾çš„å”èª¿ä¹‹å¾Œï¼Œä»ç„¶æœ‰ä¸€å€‹æ±™é»ï¼ŒGoogle å·¥ç¨‹å¸«çœ¼è£¡æ‰ä¸å¾—æ²™å­ï¼Œç”Ÿå‡ºäº†æ›´é€²ä¸€æ­¥æ”¹å–„æ–¹æ³•ã€‚")]),t._v(" "),a("h2",{attrs:{id:"äº”-æœ€å¾Œçš„å¤§é›œäº¤-profile-on-the-cloud-android-pie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº”-æœ€å¾Œçš„å¤§é›œäº¤-profile-on-the-cloud-android-pie"}},[t._v("#")]),t._v(" äº”. æœ€å¾Œçš„å¤§é›œäº¤ - Profile on the cloud ( Android Pie )")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://miro.medium.com/max/700/1*NlOHxgVWKD1OAPe696xxNw.png",alt:""}})]),t._v(" "),a("p",[t._v("é›²ç«¯é…ç½®æ–‡ä»¶(Profile on the cloud) èƒŒå¾Œçš„ "),a("mark",[t._v("ä¸»è¦æ€æƒ³æ˜¯å¤§å¤šæ•¸äººä»¥éå¸¸ç›¸ä¼¼çš„æ–¹å¼ä½¿ç”¨è©²æ‡‰ç”¨ç¨‹å¼")]),t._v("ã€‚å› æ­¤ï¼Œç‚ºäº†åœ¨å®‰è£å¾Œç«‹å³æé«˜æ€§èƒ½ï¼Œæˆ‘å€‘å¯ä»¥å¾å·²ç¶“ä½¿ç”¨éæ­¤æ‡‰ç”¨ç¨‹åºçš„äººé‚£è£¡æ”¶é›†å€‹äººè³‡æ–™æ•¸æ“šã€‚æ­¤èšåˆé…ç½®æ–‡ä»¶è³‡æ–™ç”¨æ–¼ç‚ºæ‡‰ç”¨ç¨‹åºå‰µå»ºä¸€å€‹ç¨±ç‚ºå…±åŒæ ¸å¿ƒé…ç½®æ–‡ä»¶(common core profile)çš„æ–‡ä»¶ã€‚")]),t._v(" "),a("p",[t._v("ç¸½è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è’é›†ä½¿ç”¨è€…çš„è³‡æ–™ï¼Œä¸Šå‚³æ¯ä¸€å€‹ä½¿ç”¨è€…çš„ profileï¼Œä¹‹å¾Œé›²ç«¯æœƒç”Ÿæˆä¸€å€‹å…±åŒæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå…±åŒæ ¸å¿ƒé…ç½®æ–‡ä»¶ç›¸ç•¶æ–¼ä½¿ç”¨è€…çš„å…±åŒè¡Œç‚ºã€å¸¸ä½¿ç”¨å“ªäº›åŠŸèƒ½çš„è³‡è¨Šï¼Œå› æ­¤ï¼Œç•¶æ–°ç”¨æˆ¶å®‰è£è©²æ‡‰ç”¨ç¨‹åºæ™‚ï¼Œè©²æ–‡ä»¶å°‡èˆ‡è©²æ‡‰ç”¨ç¨‹åºä¸€èµ·ä¸‹è¼‰ã€‚ART ä½¿ç”¨å®ƒä¾†é ç·¨è­¯å¤§å¤šæ•¸ç”¨æˆ¶ç¶“å¸¸åŸ·è¡Œçš„é¡åˆ¥å’Œæ–¹æ³•ï¼Œé€™æ¨£ï¼Œæ–°ç”¨æˆ¶åœ¨ä¸‹è¼‰æ‡‰ç”¨ç¨‹åºå¾Œç«‹å³ç²å¾—æ›´å¥½çš„æ€§èƒ½ã€‚")]),t._v(" "),a("p",[t._v("ç”±ä¸‹åœ–å¯ä»¥çœ‹åˆ°å•Ÿå‹•æ™‚é–“æœ‰äº†å¤§å¹…çš„æå‡ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://miro.medium.com/max/700/1*9A7C2gtxTBvjhmvP7G4GWA.png",alt:""}})]),t._v(" "),a("p",[t._v("é€™æ–¹æ³•æå‡å•Ÿå‹•é€Ÿåº¦ï¼ŒART ä¹‹å¾Œä¹Ÿæœƒéš¨è‘—ä½¿ç”¨è€…å„è‡ªçš„è¡Œç‚ºï¼Œå†å°è©²ä½¿ç”¨è€…æœ€å¸¸ç”¨çš„ç¨‹å¼ç¢¼é€²è¡Œç·¨è­¯ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å…­ã€ç¸½çµ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…­ã€ç¸½çµ"}},[t._v("#")]),t._v(" å…­ã€ç¸½çµ")]),t._v(" "),a("p",[t._v("å¼•å…¥é–‹é ­çš„ä¸€å¼µåœ–ç•¶ä½œç¸½çµ")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://miro.medium.com/max/700/1*oLO0ahW043xHq_Jg0q8twQ.png",alt:""}})]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Android ç‰ˆæœ¬")]),t._v(" "),a("th",[t._v("ç‰¹æ€§")]),t._v(" "),a("th",[t._v("å„ªé»")]),t._v(" "),a("th",[t._v("ç¼ºé»")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Android KitKat")]),t._v(" "),a("td",[t._v("Android Runtime ä½¿ç”¨ Dalvik VM å¯¦ç¾ï¼Œæ­é… JIT åŠæ™‚ç·¨è­¯")]),t._v(" "),a("td",[t._v("çœå„²å­˜ç©ºé–“è·Ÿè¨˜æ†¶é«”ç©ºé–“ (å°æ–¼æ—©æœŸçš„è¡Œå‹•è£ç½®)")]),t._v(" "),a("td",[a("ol",[a("li",[t._v("å°æ–¼è¦æ¨¡é€æ¼¸é¾å¤§çš„ APPï¼ŒJIT è² æ“”è®Šå¤§ï¼ŒåŸ·è¡Œæ™‚æœ‰æ™‚å€™æœƒè®Šæ…¢")]),a("li",[t._v("JIT monitor è¦ä¸€ç›´ç›£æ§ï¼Œæ‰‹æ©Ÿæœƒè®Šç†±ä¸”å¾ˆè€—é›»")])])])]),t._v(" "),a("tr",[a("td",[t._v("Android Lollip")]),t._v(" "),a("td",[t._v("Android Runtime å¼•å…¥ä½¿ç”¨ AOT ç·¨è­¯çš„ ART")]),t._v(" "),a("td",[a("ol",[a("li",[t._v("åŸ·è¡Œé€Ÿåº¦è®Šæ›´å¿«(ç´„20å€)")]),a("li",[t._v("æ›´åŠ çœé›»ï¼Œå› ç‚ºå°‘äº† JIT ä¸€ç›´ç›£æ§")])])]),t._v(" "),a("td",[a("ol",[a("li",[t._v("å› ç‚ºè¦é ç·¨è­¯ï¼Œæ›´é•·çš„å®‰è£ã€æ›´æ–°æ™‚é–“")]),a("li",[t._v("ç·¨è­¯å¾Œçš„æª”æ¡ˆè¼ƒå¤§ï¼Œä½¿ç”¨æ›´å¤šçš„ RAM è·Ÿ ROM")])])])]),t._v(" "),a("tr",[a("td",[t._v("Android Nougat")]),t._v(" "),a("td",[t._v("Profile-guided compilation ( JIT + AOT )")]),t._v(" "),a("td",[a("ol",[a("li",[t._v("ä½¿ç¨‹å¼ä¸‹è¼‰å®‰è£ã€æ›´æ–°æ™‚ä¸ç”¨é ç·¨è­¯ï¼Œå®‰è£æ›´æ–°é€Ÿåº¦è®Šå¿«")]),a("li",[t._v("æœ€ä½³åŒ–ç¨‹å¼ç¢¼æ™‚æ›´åŠ ç²¾æº–(Profile-guidedï¼Œç¬¦åˆä½¿ç”¨è€…è¡Œç‚º)")]),a("li",[t._v("ç¨‹å¼æª”æ¡ˆè¼ƒå°")])])]),t._v(" "),a("td",[t._v("å‰›é–‹å§‹ä½¿ç”¨å¾ˆæ…¢ï¼Œå› ç‚ºè¦å…ˆè«‹ JIT å¹«ä½ çœ‹ä½ å¸¸ç”¨å“ªå€‹å€æ®µ")])]),t._v(" "),a("tr",[a("td",[t._v("Android Pie")]),t._v(" "),a("td",[t._v("Profile in the Cloud")]),t._v(" "),a("td",[t._v("é›†åˆä¸åŒä½¿ç”¨è€…çš„ profile æˆ common core profileï¼Œä¹‹å¾Œä¸‹è¼‰å¾Œå…ˆç·¨è­¯é€™æ®µå¤§å®¶å¸¸ç”¨çš„ç¨‹å¼ç¢¼ï¼Œå¯ä»¥åŠ é€Ÿå•Ÿå‹•çš„é€Ÿåº¦ã€‚")]),t._v(" "),a("td",[t._v("ä¸‹è¼‰æ™‚è¦å¤šèŠ±ä¸€äº›æ™‚é–“ï¼Œç¨‹å¼ä¸‹è¼‰æ™‚ä¹Ÿå¤šä¸‹è¼‰ common core profileï¼Œå®‰è£è¦ç­‰ä¸€ä¸‹ä¸‹å› ç‚ºè¦ç·¨è­¯ profileï¼Œç¨‹å¼ä¹Ÿç¨å¾®è®Šå¤§ä¸€äº›ï¼Œä½†æ˜¯æˆ‘èªç‚ºå·²ç¶“åšå‡ºäº†æœ€ä½³çš„å–æ¨äº† ğŸ˜‰")])])])]),t._v(" "),a("p",[t._v("æœ€å¾Œä»¥ DVM å’Œ ART çš„å¾åŸå§‹ç¢¼çš„æµç¨‹åœ–ï¼ŒçµæŸæœ¬ç¯‡æ–‡ç« ã€‚\n"),a("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/ART_view.png/600px-ART_view.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"ä¸ƒã€åƒè€ƒé€£çµ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ƒã€åƒè€ƒé€£çµ"}},[t._v("#")]),t._v(" ä¸ƒã€åƒè€ƒé€£çµ")]),t._v(" "),a("ol",[a("li",[a("p",[a("a",{attrs:{href:"https://proandroiddev.com/android-runtime-how-dalvik-and-art-work-6e57cf1c50e5",target:"_blank",rel:"noopener noreferrer"}},[t._v("Android Runtime â€” How Dalvik and ART work?(å¿…çœ‹)"),a("OutboundLink")],1),t._v(" + "),a("a",{attrs:{href:"https://www.youtube.com/watch?v=0J1bm585UCc",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ­é…æ­£å¦¹è¬›è§£å½±ç‰‡"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/95626955",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ·±å…¥ç†è§£Androidè™›æ“¬æ©ŸåŠç·¨è­¯ç³»çµ±"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/79634014",target:"_blank",rel:"noopener noreferrer"}},[t._v("Androidè™›æ“¬æ©Ÿçš„JITç·¨è­¯å™¨"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://levelup.gitconnected.com/android-dvm-vs-art-5687c7903e65",target:"_blank",rel:"noopener noreferrer"}},[t._v("Android: Dalvik vs ART"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.infoq.cn/article/android-in-depth-dalvik",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ·±å…¥ç†è§£ Androidï¼ˆäºŒï¼‰ï¼šJava è™šæ‹Ÿæœº Dalvik"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.codenong.com/cs106791704/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dalvikå’ŒARTç·¨è­¯æ–¹å¼çš„æ¼”é€²"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/a8cc7a92137c",target:"_blank",rel:"noopener noreferrer"}},[t._v("JVMã€Dalvikã€ART ä»‹ç´¹"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.slideshare.net/ssusere3af56/how-to-implement-a-simple-dalvik-virtual-machine",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to implement a simple dalvik virtual machine"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://ithelp.ithome.com.tw/articles/10011817",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä»€éº¼æ˜¯Dalvik Virtual Machine?"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.zhihu.com/question/21935487",target:"_blank",rel:"noopener noreferrer"}},[t._v("Android çš„ ART æ˜¯ä»€éº¼æ±è¥¿ï¼Œæœ‰ä½•ä½œç”¨ï¼Ÿ"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/19606414",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç¹¼çºŒè«‡è«‡ä¸‹ä¸€ä»£Android VM runtime: ART"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://data-flair.training/blogs/android-dalvik-virtual-machine/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Working of Dalvik Virtual Machine in Android"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://stackoverflow.com/questions/9913702/why-does-android-need-a-virtual-machinedvm/9913753",target:"_blank",rel:"noopener noreferrer"}},[t._v("Why does Android need a Virtual Machine(DVM)?"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://paul.pub/android-dalvik-vm/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Androidä¸Šçš„Dalvikè™›æ“¬æ©Ÿ"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/APK",target:"_blank",rel:"noopener noreferrer"}},[t._v("APK çš„ wiki"),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);r.default=i.exports}}]);