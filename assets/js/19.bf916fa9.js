(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{793:function(t,a,n){"use strict";n.r(a);var r=n(5),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"前言、main-的一些問題"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言、main-的一些問題"}},[t._v("#")]),t._v(" 前言、Main 的一些問題")]),t._v(" "),n("p",[t._v("以一些問題拋磚引玉")]),t._v(" "),n("ol",[n("li",[t._v("main function 怎麼 link 後變那麼大 ? 不能小一點嗎 ?")]),t._v(" "),n("li",[t._v("loader 怎麼啟動 main 函數 ?")]),t._v(" "),n("li",[t._v("啟動的 main 的函數在哪裡 ?")]),t._v(" "),n("li",[t._v("main function 一定要 main 嗎 ? 不能別的 function 當 main ?")])]),t._v(" "),n("p",[t._v("很多關於 main function 的問題在本章都會闡述清楚，但仍需要具備一些基本鏈接跟組合語言的能力。那，我們開始吧😀")]),t._v(" "),n("h2",{attrs:{id:"一、老子就是不想用-main-當-entry-point-辣"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、老子就是不想用-main-當-entry-point-辣"}},[t._v("#")]),t._v(" 一、老子就是不想用 main 當 entry point 辣")]),t._v(" "),n("p",[t._v("main是用來指定程序從那裡開始執行的。就是一個大家遵守的規定已經被寫到了C99規範，")]),t._v(" "),n("h2",{attrs:{id:"二、膨脹的-main"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、膨脹的-main"}},[t._v("#")]),t._v(" 二、膨脹的 main")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token macro property"}},[n("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<stdio.h>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World!\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("當你用 "),n("code",[t._v("gcc hello.c -o hello")]),t._v(" 編譯好後，你不妨看一下你的檔案目錄")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("unix"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -ahl hello*\n-rwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lawrence lawrence "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(".2K Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(":07 hello\n-rwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lawrence lawrence   "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("69")]),t._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":56 hello.c\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("從 69 Bytes 經過編譯再鏈結後擴張成 8200 Bytes，放大了快一百倍，到底連結了什麼東西讓他變這麼肥大的。")]),t._v(" "),n("p",[t._v("接著，我們可以試著瘦身")]),t._v(" "),n("h2",{attrs:{id:"二、main函数是如何被-loader-執行的"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、main函数是如何被-loader-執行的"}},[t._v("#")]),t._v(" 二、Main函数是如何被 Loader 執行的？")]),t._v(" "),n("h2",{attrs:{id:"三、"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、"}},[t._v("#")]),t._v(" 三、")]),t._v(" "),n("h2",{attrs:{id:"四、main-函數的人生"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、main-函數的人生"}},[t._v("#")]),t._v(" 四、Main 函數的人生")]),t._v(" "),n("h2",{attrs:{id:"參考連結"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#參考連結"}},[t._v("#")]),t._v(" 參考連結")]),t._v(" "),n("ol",[n("li",[n("p",[n("a",{attrs:{href:"http://tinylab.org/wp-content/uploads/hacking-helloworld/HackingHelloWorld-PartI-2007-03-25.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入淺出 Hello World"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux x86 Program Start Up or - How the heck do we get to main()"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://luomuxiaoxiao.com/?p=516#321__start",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux X86 程序啟動– main函數是如何被執行的"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844904134408142861",target:"_blank",rel:"noopener noreferrer"}},[t._v("詳解ELF(Executable and Linkable Format)"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://stackoverflow.com/questions/7050925/is-it-possible-to-write-a-program-without-using-main-function",target:"_blank",rel:"noopener noreferrer"}},[t._v("Is it possible to write a program without using main() function"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://www.zhihu.com/question/28360770",target:"_blank",rel:"noopener noreferrer"}},[t._v("C語言為什麼要有 main 函數 ? 具體作用是什麼 ?"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"http://timelessname.com/elfbin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Smallest x86 ELF Hello World"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://blog.csdn.net/github_37382319/article/details/82749991",target:"_blank",rel:"noopener noreferrer"}},[t._v("徹底理解鏈接器"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://hackmd.io/@sysprog/c-runtime?type=view",target:"_blank",rel:"noopener noreferrer"}},[t._v("你所不知道的 C 語言: 執行階段程式庫 (CRT)"),n("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=e.exports}}]);